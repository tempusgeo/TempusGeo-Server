const express = require('express'); const router = express.Router(); const authService = require('../services/AuthService'); const dataManager = require('../services/DataManager'); router.post('/login', async (req, res) => { try { const { email, companyId, password } = req.body; const result = await authService.adminLogin(companyId || email, password); res.json(result); } catch (e) { res.status(500).json({ success: false, error: e.message }); } }); router.get('/config', async (req, res) => { try { const { companyId } = req.query; const config = await dataManager.getCompanyConfig(companyId); res.json({ success: true, config }); } catch (e) { res.status(500).json({ success: false, error: e.message }); } }); module.exports = router;
