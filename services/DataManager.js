const fs = require('fs'); const path = require('path'); class DataManager { constructor() { this.CACHE = { clients: [] }; this.clientsPath = path.join(__dirname, '../data/clients.json'); this.init(); } init() { if (!fs.existsSync(path.join(__dirname, '../data'))) fs.mkdirSync(path.join(__dirname, '../data')); if (!fs.existsSync(this.clientsPath)) fs.writeFileSync(this.clientsPath, JSON.stringify([])); this.CACHE.clients = JSON.parse(fs.readFileSync(this.clientsPath, 'utf8')); } async getCompanyConfig(id) { const client = this.CACHE.clients.find(c => c.id === id); return client ? client.config : {}; } async getEmployeeStatus(companyId, userName) { return { isClockedIn: false }; } async logShift(companyId, userName, action, timestamp) { return { success: true }; } async getClientById(id) { return this.CACHE.clients.find(c => c.id === id); } } module.exports = new DataManager();
